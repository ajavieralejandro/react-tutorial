{"ast":null,"code":"import _regeneratorRuntime from \"/Users/javieralejandroamorosigomez/Desktop/Javier/Proyectos/react/react-tutorial/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/Users/javieralejandroamorosigomez/Desktop/Javier/Proyectos/react/react-tutorial/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/javieralejandroamorosigomez/Desktop/Javier/Proyectos/react/react-tutorial/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/javieralejandroamorosigomez/Desktop/Javier/Proyectos/react/react-tutorial/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/javieralejandroamorosigomez/Desktop/Javier/Proyectos/react/react-tutorial/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/javieralejandroamorosigomez/Desktop/Javier/Proyectos/react/react-tutorial/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/javieralejandroamorosigomez/Desktop/Javier/Proyectos/react/react-tutorial/src/pages/shop/shop.component.jsx\";\nimport React from \"react\";\nimport { Route } from \"react-router-dom\";\nimport CollectionsOverview from \"../../components/collections-overview/collections-overview.component\";\nimport CollectionPage from \"../collection/collection.component\";\nimport { connect } from \"react-redux\";\nimport { UpdateCollections as _UpdateCollections } from \"../../redux/shop/shop.actions\";\nimport { firestore, convertCollectionsSnapshotToMap } from \"../../firebase/firebase.utils\";\nimport withSpinner from \"../../components/with-spinner/with-spinner.component\";\n\nvar ShopPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ShopPage, _React$Component);\n\n  function ShopPage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ShopPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ShopPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      loading: true\n    };\n    return _this;\n  }\n\n  _createClass(ShopPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var UpdateCollections = this.props.UpdateCollections;\n      var collectionRef = firestore.collection('collections');\n      collectionRef.onSnapshot(function _callee(snapshot) {\n        var toR;\n        return _regeneratorRuntime.async(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                toR = convertCollectionsSnapshotToMap(snapshot);\n                UpdateCollections(toR);\n\n                _this2.setState({\n                  loading: false\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var match = this.props.match;\n      var loading = this.state.loading;\n      var CollectionsOverviewSpinner = withSpinner(CollectionsOverview);\n      var CollectionPageSpinner = withSpinner(CollectionPage);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"\".concat(match.path),\n        render: function render(props) {\n          console.log(\"las props son : \");\n          console.log(props);\n          return React.createElement(CollectionsOverviewSpinner, Object.assign({\n            isLoading: loading\n          }, props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 40\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"\".concat(match.path, \"/:collectionId\"),\n        render: function render(props) {\n          return React.createElement(CollectionPageSpinner, Object.assign({\n            isLoading: loading\n          }, props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 41\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return ShopPage;\n}(React.Component);\n\nexport var mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    UpdateCollections: function UpdateCollections(collectionsMap) {\n      return dispatch(_UpdateCollections(collectionsMap));\n    }\n  };\n};\nexport default connect(null, mapDispatchToProps)(ShopPage);","map":{"version":3,"sources":["/Users/javieralejandroamorosigomez/Desktop/Javier/Proyectos/react/react-tutorial/src/pages/shop/shop.component.jsx"],"names":["React","Route","CollectionsOverview","CollectionPage","connect","UpdateCollections","firestore","convertCollectionsSnapshotToMap","withSpinner","ShopPage","state","loading","props","collectionRef","collection","onSnapshot","snapshot","toR","setState","match","CollectionsOverviewSpinner","CollectionPageSpinner","path","console","log","Component","mapDispatchToProps","dispatch","collectionsMap"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,OAAOC,mBAAP,MAAgC,sEAAhC;AACA,OAAOC,cAAP,MAA2B,oCAA3B;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,iBAAiB,IAAjBA,kBAAR,QAAgC,+BAAhC;AACA,SAAQC,SAAR,EAAkBC,+BAAlB,QAAwD,+BAAxD;AACA,OAAOC,WAAP,MAAwB,sDAAxB;;IAEMC,Q;;;;;;;;;;;;;;;;;UAEJC,K,GAAQ;AACNC,MAAAA,OAAO,EAAE;AADH,K;;;;;;wCAIY;AAAA;;AAAA,UACXN,iBADW,GACU,KAAKO,KADf,CACXP,iBADW;AAElB,UAAMQ,aAAa,GAAGP,SAAS,CAACQ,UAAV,CAAqB,aAArB,CAAtB;AACAD,MAAAA,aAAa,CAACE,UAAd,CAAyB,iBAAMC,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACjBC,gBAAAA,GADiB,GACXV,+BAA+B,CAACS,QAAD,CADpB;AAEvBX,gBAAAA,iBAAiB,CAACY,GAAD,CAAjB;;AACA,gBAAA,MAAI,CAACC,QAAL,CAAc;AAACP,kBAAAA,OAAO,EAAG;AAAX,iBAAd;;AAHuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAzB;AAOD;;;6BAGO;AAAA,UACGQ,KADH,GACY,KAAKP,KADjB,CACGO,KADH;AAAA,UAEGR,OAFH,GAEc,KAAKD,KAFnB,CAEGC,OAFH;AAGJ,UAAMS,0BAA0B,GAAGZ,WAAW,CAACN,mBAAD,CAA9C;AACA,UAAMmB,qBAAqB,GAAGb,WAAW,CAACL,cAAD,CAAzC;AAEF,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,KAAD;AAAO,QAAA,KAAK,MAAZ;AAAa,QAAA,IAAI,YAAKgB,KAAK,CAACG,IAAX,CAAjB;AAAoC,QAAA,MAAM,EAAE,gBAAAV,KAAK,EAAE;AACjDW,UAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,UAAAA,OAAO,CAACC,GAAR,CAAYZ,KAAZ;AACA,iBAAO,oBAAC,0BAAD;AAA4B,YAAA,SAAS,EAAED;AAAvC,aAAoDC,KAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAP;AAAsE,SAHxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAKE,oBAAC,KAAD;AAAO,QAAA,IAAI,YAAKO,KAAK,CAACG,IAAX,mBAAX;AAA4C,QAAA,MAAM,EAAE,gBAAAV,KAAK;AAAA,iBAAE,oBAAC,qBAAD;AAAuB,YAAA,SAAS,EAAED;AAAlC,aAA+CC,KAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAF;AAAA,SAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CADF;AASD;;;;EAlCoBZ,KAAK,CAACyB,S;;AAsC3B,OAAO,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,QAAQ;AAAA,SAAI;AAC5CtB,IAAAA,iBAAiB,EAAG,2BAAAuB,cAAc;AAAA,aAAID,QAAQ,CAACtB,kBAAiB,CAACuB,cAAD,CAAlB,CAAZ;AAAA;AADU,GAAJ;AAAA,CAAnC;AAKT,eAAexB,OAAO,CAAC,IAAD,EAAMsB,kBAAN,CAAP,CAAiCjB,QAAjC,CAAf","sourcesContent":["import React from \"react\";\nimport { Route } from \"react-router-dom\";\nimport CollectionsOverview from \"../../components/collections-overview/collections-overview.component\";\nimport CollectionPage from \"../collection/collection.component\";\nimport {connect} from \"react-redux\";\nimport {UpdateCollections} from \"../../redux/shop/shop.actions\";\nimport {firestore,convertCollectionsSnapshotToMap} from \"../../firebase/firebase.utils\";\nimport withSpinner from \"../../components/with-spinner/with-spinner.component\";\n\nclass ShopPage extends React.Component{\n  //unsubscribeFromSnapshot = null;\n  state = {\n    loading: true\n  }\ns\n  componentDidMount() {\n    const {UpdateCollections} = this.props;\n    const collectionRef = firestore.collection('collections');\n    collectionRef.onSnapshot(async snapshot=> {\n      const toR = convertCollectionsSnapshotToMap(snapshot);\n      UpdateCollections(toR);\n      this.setState({loading : false});\n      \n    });\n    \n  }\n\n\n  render(){\n      const {match} = this.props;\n      const {loading} = this.state;\n      const CollectionsOverviewSpinner = withSpinner(CollectionsOverview);\n      const CollectionPageSpinner = withSpinner(CollectionPage);\n\n    return (\n      <div>\n        <Route exact path={`${match.path}`} render={props=>{\n          console.log(\"las props son : \");\n          console.log(props);\n          return <CollectionsOverviewSpinner isLoading={loading} {...props} />;}} />\n        <Route path={`${match.path}/:collectionId`} render={props=><CollectionPageSpinner isLoading={loading} {...props}  />} />\n      </div>\n    );\n  };\n  \n  }\n\n  export const mapDispatchToProps = dispatch =>({\n    UpdateCollections : collectionsMap => dispatch(UpdateCollections(collectionsMap))  \n  })\n \n \nexport default connect(null,mapDispatchToProps)(ShopPage);\n"]},"metadata":{},"sourceType":"module"}