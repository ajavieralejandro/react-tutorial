{"ast":null,"code":"import _regeneratorRuntime from \"/Users/javieralejandroamorosigomez/Desktop/Javier/Proyectos/react/react-tutorial/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(clearCartOnSignOut),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(getFirebaseCart),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(onGetCart),\n    _marked4 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(saveCart),\n    _marked5 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(onSaveCart),\n    _marked6 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(onSignOutSuccess),\n    _marked7 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(cartSagas);\n\nimport { all, call, takeLatest, put } from 'redux-saga/effects';\nimport UserActionTypes from '../user/user.types';\nimport { clearCart } from './cart.actions';\nimport { getUserCart, writeUserCart } from '../../firebase/firebase.utils';\nimport { select } from 'redux-saga/effects';\nimport * as selectors from './cart.selectors';\nimport { setCartItems } from './cart.actions';\nimport CartActionTypes from './cart.types';\nexport function clearCartOnSignOut() {\n  return _regeneratorRuntime.wrap(function clearCartOnSignOut$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return put(clearCart());\n\n        case 2:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\nexport function getFirebaseCart(action) {\n  var _ref, cart;\n\n  return _regeneratorRuntime.wrap(function getFirebaseCart$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return console.log(\"Estoy recibiendo como parametro : \", action);\n\n        case 2:\n          _context2.next = 4;\n          return getUserCart(action.payload);\n\n        case 4:\n          _ref = _context2.sent;\n          cart = _ref.cart;\n          console.log(\"Lo que estoy recibiendo como cart es : \", cart);\n          _context2.next = 9;\n          return put(setCartItems(cart));\n\n        case 9:\n          _context2.next = 11;\n          return console.log(\"termine mi operacion\");\n\n        case 11:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\nexport function onGetCart() {\n  var action;\n  return _regeneratorRuntime.wrap(function onGetCart$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return takeLatest(CartActionTypes.GET_CART_FROM_FIREBASE, getFirebaseCart);\n\n        case 2:\n          action = _context3.sent;\n\n        case 3:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\nexport function saveCart(action) {\n  var cartState, cart, toAdd;\n  return _regeneratorRuntime.wrap(function saveCart$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          console.log(\"Quiero ver si llego a saveCart con : \", action); //Es importante tener en cuenta que no funciona sin el yield\n          //tambien que solo sirve para importar todo el estado y no los selectores...\n          //abría que ver una manera de usarlo con los selectores.. \n\n          _context4.next = 3;\n          return select(selectors.selectCart);\n\n        case 3:\n          cartState = _context4.sent;\n          cart = cartState.cartItems;\n          toAdd = {\n            cart: cart,\n            id: action.payload\n          };\n          console.log(\"Estoy por insertar\", toAdd);\n          _context4.next = 9;\n          return writeUserCart(action.payload, toAdd);\n\n        case 9:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}\nexport function onSaveCart() {\n  var action;\n  return _regeneratorRuntime.wrap(function onSaveCart$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return takeLatest(CartActionTypes.SAVE_CART_ITEMS, saveCart);\n\n        case 2:\n          action = _context5.sent;\n\n        case 3:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}\nexport function onSignOutSuccess() {\n  return _regeneratorRuntime.wrap(function onSignOutSuccess$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return takeLatest(UserActionTypes.SIGN_OUT_SUCCESS, clearCartOnSignOut);\n\n        case 2:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6);\n}\nexport function cartSagas() {\n  return _regeneratorRuntime.wrap(function cartSagas$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return all([call(onSignOutSuccess), call(onGetCart), call(onSaveCart)]);\n\n        case 2:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7);\n}","map":{"version":3,"sources":["/Users/javieralejandroamorosigomez/Desktop/Javier/Proyectos/react/react-tutorial/client/src/redux/cart/cart.sagas.js"],"names":["clearCartOnSignOut","getFirebaseCart","onGetCart","saveCart","onSaveCart","onSignOutSuccess","cartSagas","all","call","takeLatest","put","UserActionTypes","clearCart","getUserCart","writeUserCart","select","selectors","setCartItems","CartActionTypes","action","console","log","payload","cart","GET_CART_FROM_FIREBASE","selectCart","cartState","cartItems","toAdd","id","SAVE_CART_ITEMS","SIGN_OUT_SUCCESS"],"mappings":"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","sourcesContent":["import {all, call,takeLatest, put} from 'redux-saga/effects';\nimport UserActionTypes from '../user/user.types';\nimport {clearCart} from './cart.actions';\nimport {getUserCart,writeUserCart} from '../../firebase/firebase.utils';\nimport {select} from 'redux-saga/effects';\nimport * as selectors from './cart.selectors';\nimport {setCartItems} from './cart.actions';\nimport CartActionTypes from './cart.types';\n\n\nexport function* clearCartOnSignOut(){\n    yield put(clearCart());\n}\n\nexport function* getFirebaseCart(action){\n    //Este script ya fue ejecutado en la primera pasada\n    //yield addCart();\n    yield console.log(\"Estoy recibiendo como parametro : \",action);\n    const {cart} = yield getUserCart(action.payload);\n    console.log(\"Lo que estoy recibiendo como cart es : \",cart);\n    yield put(setCartItems(cart));\n    yield console.log(\"termine mi operacion\");\n}\n\nexport function* onGetCart(){\n    const action = yield takeLatest(CartActionTypes.GET_CART_FROM_FIREBASE,getFirebaseCart);\n}\n\nexport function* saveCart(action){\n    console.log(\"Quiero ver si llego a saveCart con : \",action);\n    //Es importante tener en cuenta que no funciona sin el yield\n    //tambien que solo sirve para importar todo el estado y no los selectores...\n    //abría que ver una manera de usarlo con los selectores.. \n    const cartState = yield select(selectors.selectCart);\n    const cart = cartState.cartItems;\n    const toAdd = {cart:cart,id:action.payload};\n    console.log(\"Estoy por insertar\",toAdd);\n    yield writeUserCart(action.payload,toAdd);\n}\n\n\nexport function* onSaveCart (){\n    const action = yield takeLatest(CartActionTypes.SAVE_CART_ITEMS,saveCart);\n}\n\nexport function* onSignOutSuccess(){\n    yield takeLatest(UserActionTypes.SIGN_OUT_SUCCESS,clearCartOnSignOut);\n}\n\n\nexport function* cartSagas() {\n    yield(all([call(onSignOutSuccess),call(onGetCart),call(onSaveCart)]));\n}"]},"metadata":{},"sourceType":"module"}